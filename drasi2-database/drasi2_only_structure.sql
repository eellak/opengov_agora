-- phpMyAdmin SQL Dump
-- version 3.4.11.1deb2
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Aug 06, 2013 at 02:49 PM
-- Server version: 5.5.31
-- PHP Version: 5.4.4-14

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `agora`
--

-- --------------------------------------------------------

--
-- Table structure for table `CMSENTITY`
--

CREATE TABLE IF NOT EXISTS `CMSENTITY` (
  `ID` varchar(255) NOT NULL,
  `REPLACES_REF` varchar(255) DEFAULT NULL,
  `USERDIAVGEIAID` int(11) DEFAULT NULL,
  `SUBMISSIONTIME` datetime DEFAULT NULL,
  `LASTMODIFIEDTIME` datetime DEFAULT NULL,
  `DELETED` bit(1) DEFAULT NULL,
  `DELETEDREASON` varchar(255) DEFAULT NULL,
  `DELETIONTYPE_IDREF` varchar(255) DEFAULT NULL,
  `DELETEDFROMUSERID` int(11) DEFAULT NULL,
  `DELTEDTIME` datetime DEFAULT NULL,
  `CANCELLED` bit(1) DEFAULT NULL,
  `CANCELLEDREASON` varchar(255) DEFAULT NULL,
  `CANCELLATIONTYPE_IDREF` varchar(255) DEFAULT NULL,
  `CANCELLEDFROMUSERID` int(11) DEFAULT NULL,
  `CANCELLEDTIME` datetime DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FKAD799A4CAA994118` (`REPLACES_REF`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `CONTRACT`
--

CREATE TABLE IF NOT EXISTS `CONTRACT` (
  `ID` varchar(255) NOT NULL,
  `CONTRACTINGAUTHORITY_IDREF` varchar(255) DEFAULT NULL,
  `AWARDPROCEDURE_IDREF` varchar(255) DEFAULT NULL,
  `CONTRACTTYPE_IDREF` varchar(255) DEFAULT NULL,
  `COMMISSIONCRITERIA_IDREF` varchar(255) DEFAULT NULL,
  `CONTRACTINGAUTHORITY_OTHER` varchar(255) DEFAULT NULL,
  `SINCE` datetime DEFAULT NULL,
  `UNTIL` datetime DEFAULT NULL,
  `CONTRACTPLACE` varchar(255) DEFAULT NULL,
  `PROJECTCODE` varchar(255) DEFAULT NULL,
  `CHANGESCONTRACT_REF` varchar(255) DEFAULT NULL,
  `EXTENDSCONTRACT_REF` varchar(255) DEFAULT NULL,
  `COFUNDED` bit(1) DEFAULT NULL,
  `FUNDEDFROMPIP` bit(1) DEFAULT NULL,
  `CODECOFUNDED` varchar(255) DEFAULT NULL,
  `CODEPIP` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FKCDB011278665E7A` (`ID`),
  KEY `FKCDB01128800EE22` (`CHANGESCONTRACT_REF`),
  KEY `FKCDB0112E109EF8` (`EXTENDSCONTRACT_REF`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `CONTRACTITEM`
--

CREATE TABLE IF NOT EXISTS `CONTRACTITEM` (
  `CONTRACTITEM_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `QUANTITY` int(11) DEFAULT NULL,
  `UNITOFMEASURE_IDREF` varchar(255) DEFAULT NULL,
  `DESCRIPTION` longtext,
  `PROCUREMENTREQUEST_REF` varchar(255) DEFAULT NULL,
  `NOTICE_REF` varchar(255) DEFAULT NULL,
  `CONTRACT_REF` varchar(255) DEFAULT NULL,
  `ADDRESS` varchar(255) DEFAULT NULL,
  `ADDRESSNO` varchar(255) DEFAULT NULL,
  `ADDRESSPOSTAL` varchar(255) DEFAULT NULL,
  `NUTS` varchar(255) DEFAULT NULL,
  `CITY` varchar(255) DEFAULT NULL,
  `COUNTRY_IDREF` varchar(255) DEFAULT NULL,
  `COUNTRYPRODUCED_IDREF` varchar(255) DEFAULT NULL,
  `INVOICENUMBER` varchar(255) DEFAULT NULL,
  `NOTICE_ID` varchar(255) DEFAULT NULL,
  `idx` int(11) DEFAULT NULL,
  `PROCUREMENTREQUEST_ID` varchar(255) DEFAULT NULL,
  `CONTRACT_ID` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`CONTRACTITEM_ID`),
  KEY `FK36929B256255DE2B` (`NOTICE_REF`),
  KEY `FK36929B25CF077B61` (`PROCUREMENTREQUEST_ID`),
  KEY `FK36929B25132A6761` (`CONTRACT_ID`),
  KEY `FK36929B25EF21D619` (`PROCUREMENTREQUEST_REF`),
  KEY `FK36929B25117052A9` (`CONTRACTITEM_ID`),
  KEY `FK36929B253E2A97DF` (`CONTRACT_REF`),
  KEY `FK36929B251F24D761` (`NOTICE_ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6318 ;

-- --------------------------------------------------------

--
-- Table structure for table `CONTRACTITEM_CPVS`
--

CREATE TABLE IF NOT EXISTS `CONTRACTITEM_CPVS` (
  `CONTRACTITEM_ID` bigint(20) NOT NULL,
  `CPV_ID` bigint(20) NOT NULL,
  PRIMARY KEY (`CONTRACTITEM_ID`,`CPV_ID`),
  KEY `FKD853F8C4431D7321` (`CONTRACTITEM_ID`),
  KEY `FKD853F8C4284349D3` (`CPV_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `CONTRACTPARTY`
--

CREATE TABLE IF NOT EXISTS `CONTRACTPARTY` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `NAME` varchar(255) DEFAULT NULL,
  `AFM` varchar(255) DEFAULT NULL,
  `COUNTRY_IDREF` varchar(255) DEFAULT NULL,
  `CONTRACT_ID` varchar(255) DEFAULT NULL,
  `idx` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK9C1AFCF4132A6761` (`CONTRACT_ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2666 ;

-- --------------------------------------------------------

--
-- Table structure for table `COST`
--

CREATE TABLE IF NOT EXISTS `COST` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `COSTBEFOREVAT` double DEFAULT NULL,
  `VATPERCENTAGE` int(11) DEFAULT NULL,
  `CURRENCY_IDREF` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6318 ;

-- --------------------------------------------------------

--
-- Table structure for table `CPV`
--

CREATE TABLE IF NOT EXISTS `CPV` (
  `CPV_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `CPVCODE` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`CPV_ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=645 ;

-- --------------------------------------------------------

--
-- Table structure for table `DECISION_SIGNERS`
--

CREATE TABLE IF NOT EXISTS `DECISION_SIGNERS` (
  `DECISION_ID` varchar(255) NOT NULL,
  `SIGNERSDIAVGEIAID` int(11) DEFAULT NULL,
  `idx` int(11) NOT NULL,
  PRIMARY KEY (`DECISION_ID`,`idx`),
  KEY `FKFA722D06717135BD` (`DECISION_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `DOCUMENT`
--

CREATE TABLE IF NOT EXISTS `DOCUMENT` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `DOCUMENT_KEY` varchar(255) DEFAULT NULL,
  `FILE_TYPE` varchar(255) DEFAULT NULL,
  `SIZE` int(11) DEFAULT NULL,
  `STAMPED_SIZE` int(11) DEFAULT NULL,
  `HASH` varchar(255) DEFAULT NULL,
  `STAMPED_HASH` varchar(255) DEFAULT NULL,
  `STAMP` varchar(255) DEFAULT NULL,
  `CONTENT_TYPE` varchar(255) DEFAULT NULL,
  `HASH_ALGORITHM` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5412 ;

-- --------------------------------------------------------

--
-- Table structure for table `KAECODES`
--

CREATE TABLE IF NOT EXISTS `KAECODES` (
  `CONTRACTITEM_ID` bigint(20) NOT NULL,
  `KAECODE` varchar(255) DEFAULT NULL,
  `idx` int(11) NOT NULL,
  PRIMARY KEY (`CONTRACTITEM_ID`,`idx`),
  KEY `FK5700ABB7431D7321` (`CONTRACTITEM_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `NOTICE`
--

CREATE TABLE IF NOT EXISTS `NOTICE` (
  `ID` varchar(255) NOT NULL,
  `SINCE` datetime DEFAULT NULL,
  `UNTIL` datetime DEFAULT NULL,
  `AWARDPROCEDURE_IDREF` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK899A8AD878665E7A` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `PAYMENT`
--

CREATE TABLE IF NOT EXISTS `PAYMENT` (
  `ID` varchar(255) NOT NULL,
  `CONTRACT_REF` varchar(255) DEFAULT NULL,
  `RESPONSIBILITYASSUMPTIONCODE` varchar(255) DEFAULT NULL,
  `PRIMARY_PARTY_REF` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FKFBE7BDE636B1D42A` (`PRIMARY_PARTY_REF`),
  KEY `FKFBE7BDE678665E7A` (`ID`),
  KEY `FKFBE7BDE63E2A97DF` (`CONTRACT_REF`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `PAYMENTITEM`
--

CREATE TABLE IF NOT EXISTS `PAYMENTITEM` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `CONTRACT_PARTY_REF` bigint(20) DEFAULT NULL,
  `CONTRACT_ITEM_REF` bigint(20) DEFAULT NULL,
  `RESPONSIBILITYASSUMPTIONCODE` varchar(255) DEFAULT NULL,
  `PAYMENT_ID` varchar(255) DEFAULT NULL,
  `idx` int(11) DEFAULT NULL,
  `PAYED` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK248CCDF9C36C8C33` (`PAYMENT_ID`),
  KEY `FK248CCDF94E0D433A` (`CONTRACT_PARTY_REF`),
  KEY `FK248CCDF97DB198A0` (`CONTRACT_ITEM_REF`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=733 ;

-- --------------------------------------------------------

--
-- Table structure for table `PROCUREMENTREQUEST`
--

CREATE TABLE IF NOT EXISTS `PROCUREMENTREQUEST` (
  `ID` varchar(255) NOT NULL,
  `APPROVESREQUEST_REF` varchar(255) DEFAULT NULL,
  `AWARDPROCEDURE_IDREF` varchar(255) DEFAULT NULL,
  `RESPONSIBILITYASSUMPTIONCODE` varchar(255) DEFAULT NULL,
  `FULFILMENTDATE` datetime DEFAULT NULL,
  `EPPAPPROVED` bit(1) DEFAULT NULL,
  `CODE` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK2B59F1DF78665E7A` (`ID`),
  KEY `FK2B59F1DFB3619C43` (`APPROVESREQUEST_REF`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `PUBLICORGANIZATIONDECISION`
--

CREATE TABLE IF NOT EXISTS `PUBLICORGANIZATIONDECISION` (
  `ID` varchar(255) NOT NULL,
  `TITLE` longtext,
  `UNIQUEDOCUMENTCODE` varchar(255) DEFAULT NULL,
  `PROTOCOLNUMBERCODE` varchar(255) DEFAULT NULL,
  `ORGANIZATIONDIAVGEIAID` int(11) DEFAULT NULL,
  `UNITDIAVGEIAID` int(11) DEFAULT NULL,
  `ISSUER_EMAIL` varchar(255) DEFAULT NULL,
  `DIAVGEIAPUBLISHED` bit(1) DEFAULT NULL,
  `DATESIGNED` datetime DEFAULT NULL,
  `DOCUMENT` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FKA6FD69F81A40091D` (`DOCUMENT`),
  KEY `FKA6FD69F88E0CF9A0` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `RELATEDADAS`
--

CREATE TABLE IF NOT EXISTS `RELATEDADAS` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `ADACODE` varchar(255) DEFAULT NULL,
  `ADATYPE` varchar(255) DEFAULT NULL,
  `PUBLICORGANIZATIONDECISION_ID` varchar(255) DEFAULT NULL,
  `idx` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FKC2B0BE20DEC7C221` (`PUBLICORGANIZATIONDECISION_ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1804 ;

-- --------------------------------------------------------

--
-- Table structure for table `uid_generator`
--

CREATE TABLE IF NOT EXISTS `uid_generator` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `orgId` int(11) NOT NULL,
  `dateKey` int(11) NOT NULL,
  PRIMARY KEY (`orgId`,`dateKey`,`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `CMSENTITY`
--
ALTER TABLE `CMSENTITY`
  ADD CONSTRAINT `FKAD799A4CAA994118` FOREIGN KEY (`REPLACES_REF`) REFERENCES `CMSENTITY` (`ID`);

--
-- Constraints for table `CONTRACT`
--
ALTER TABLE `CONTRACT`
  ADD CONSTRAINT `FKCDB011278665E7A` FOREIGN KEY (`ID`) REFERENCES `PUBLICORGANIZATIONDECISION` (`ID`),
  ADD CONSTRAINT `FKCDB01128800EE22` FOREIGN KEY (`CHANGESCONTRACT_REF`) REFERENCES `CONTRACT` (`ID`),
  ADD CONSTRAINT `FKCDB0112E109EF8` FOREIGN KEY (`EXTENDSCONTRACT_REF`) REFERENCES `CONTRACT` (`ID`);

--
-- Constraints for table `CONTRACTITEM`
--
ALTER TABLE `CONTRACTITEM`
  ADD CONSTRAINT `FK36929B25117052A9` FOREIGN KEY (`CONTRACTITEM_ID`) REFERENCES `COST` (`ID`),
  ADD CONSTRAINT `FK36929B25132A6761` FOREIGN KEY (`CONTRACT_ID`) REFERENCES `CONTRACT` (`ID`),
  ADD CONSTRAINT `FK36929B251F24D761` FOREIGN KEY (`NOTICE_ID`) REFERENCES `NOTICE` (`ID`),
  ADD CONSTRAINT `FK36929B253E2A97DF` FOREIGN KEY (`CONTRACT_REF`) REFERENCES `CONTRACT` (`ID`),
  ADD CONSTRAINT `FK36929B256255DE2B` FOREIGN KEY (`NOTICE_REF`) REFERENCES `NOTICE` (`ID`),
  ADD CONSTRAINT `FK36929B25CF077B61` FOREIGN KEY (`PROCUREMENTREQUEST_ID`) REFERENCES `PROCUREMENTREQUEST` (`ID`),
  ADD CONSTRAINT `FK36929B25EF21D619` FOREIGN KEY (`PROCUREMENTREQUEST_REF`) REFERENCES `PROCUREMENTREQUEST` (`ID`);

--
-- Constraints for table `CONTRACTITEM_CPVS`
--
ALTER TABLE `CONTRACTITEM_CPVS`
  ADD CONSTRAINT `FKD853F8C4284349D3` FOREIGN KEY (`CPV_ID`) REFERENCES `CPV` (`CPV_ID`),
  ADD CONSTRAINT `FKD853F8C4431D7321` FOREIGN KEY (`CONTRACTITEM_ID`) REFERENCES `CONTRACTITEM` (`CONTRACTITEM_ID`);

--
-- Constraints for table `CONTRACTPARTY`
--
ALTER TABLE `CONTRACTPARTY`
  ADD CONSTRAINT `FK9C1AFCF4132A6761` FOREIGN KEY (`CONTRACT_ID`) REFERENCES `CONTRACT` (`ID`);

--
-- Constraints for table `DECISION_SIGNERS`
--
ALTER TABLE `DECISION_SIGNERS`
  ADD CONSTRAINT `FKFA722D06717135BD` FOREIGN KEY (`DECISION_ID`) REFERENCES `PUBLICORGANIZATIONDECISION` (`ID`);

--
-- Constraints for table `KAECODES`
--
ALTER TABLE `KAECODES`
  ADD CONSTRAINT `FK5700ABB7431D7321` FOREIGN KEY (`CONTRACTITEM_ID`) REFERENCES `CONTRACTITEM` (`CONTRACTITEM_ID`);

--
-- Constraints for table `NOTICE`
--
ALTER TABLE `NOTICE`
  ADD CONSTRAINT `FK899A8AD878665E7A` FOREIGN KEY (`ID`) REFERENCES `PUBLICORGANIZATIONDECISION` (`ID`);

--
-- Constraints for table `PAYMENT`
--
ALTER TABLE `PAYMENT`
  ADD CONSTRAINT `FKFBE7BDE636B1D42A` FOREIGN KEY (`PRIMARY_PARTY_REF`) REFERENCES `CONTRACTPARTY` (`ID`),
  ADD CONSTRAINT `FKFBE7BDE63E2A97DF` FOREIGN KEY (`CONTRACT_REF`) REFERENCES `CONTRACT` (`ID`),
  ADD CONSTRAINT `FKFBE7BDE678665E7A` FOREIGN KEY (`ID`) REFERENCES `PUBLICORGANIZATIONDECISION` (`ID`);

--
-- Constraints for table `PAYMENTITEM`
--
ALTER TABLE `PAYMENTITEM`
  ADD CONSTRAINT `FK248CCDF94E0D433A` FOREIGN KEY (`CONTRACT_PARTY_REF`) REFERENCES `CONTRACTPARTY` (`ID`),
  ADD CONSTRAINT `FK248CCDF97DB198A0` FOREIGN KEY (`CONTRACT_ITEM_REF`) REFERENCES `CONTRACTITEM` (`CONTRACTITEM_ID`),
  ADD CONSTRAINT `FK248CCDF9C36C8C33` FOREIGN KEY (`PAYMENT_ID`) REFERENCES `PAYMENT` (`ID`);

--
-- Constraints for table `PROCUREMENTREQUEST`
--
ALTER TABLE `PROCUREMENTREQUEST`
  ADD CONSTRAINT `FK2B59F1DF78665E7A` FOREIGN KEY (`ID`) REFERENCES `PUBLICORGANIZATIONDECISION` (`ID`),
  ADD CONSTRAINT `FK2B59F1DFB3619C43` FOREIGN KEY (`APPROVESREQUEST_REF`) REFERENCES `PROCUREMENTREQUEST` (`ID`);

--
-- Constraints for table `PUBLICORGANIZATIONDECISION`
--
ALTER TABLE `PUBLICORGANIZATIONDECISION`
  ADD CONSTRAINT `FKA6FD69F81A40091D` FOREIGN KEY (`DOCUMENT`) REFERENCES `DOCUMENT` (`ID`),
  ADD CONSTRAINT `FKA6FD69F88E0CF9A0` FOREIGN KEY (`ID`) REFERENCES `CMSENTITY` (`ID`);

--
-- Constraints for table `RELATEDADAS`
--
ALTER TABLE `RELATEDADAS`
  ADD CONSTRAINT `FKC2B0BE20DEC7C221` FOREIGN KEY (`PUBLICORGANIZATIONDECISION_ID`) REFERENCES `PUBLICORGANIZATIONDECISION` (`ID`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
